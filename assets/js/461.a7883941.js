(window.webpackJsonp=window.webpackJsonp||[]).push([[461],{1352:function(s,n,a){"use strict";a.r(n);var e=a(17),t=Object(e.a)({},(function(){var s=this,n=s.$createElement,a=s._self._c||n;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h1",{attrs:{id:"项目开始啦"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目开始啦"}},[s._v("#")]),s._v(" 项目开始啦")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("npm i koa-generator -g\nkoa2 peiqi\ncd peiqi\nnpm i \nnpm start\n访问 3000\n调整目录文件夹 \nsrc\n    public\n    views\n    routes\n    app.js\n修改 bin/www 引入app.js那里\n新建 middlewares db models controller 文件夹\ncnpm i koa-generic-session --save\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("blockquote",[a("p",[s._v("在 app.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const session = require('koa-generic-session')\napp.keys = ['3829##@#^dwd']\napp.use(session({\n  // 配置cookie\n  cookie: {\n    path: '/',\n    httpOnly: true,\n    maxAge: 24 * 60 * 60 * 1000\n  }\n}))\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br")])]),a("h1",{attrs:{id:"支持跨域"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#支持跨域"}},[s._v("#")]),s._v(" 支持跨域")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cnpm i koa2-cors --save \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("在 app.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const cors = require('koa2-cors')\n// cors 配置\napp.use(cors({\n  // 前端 origin\n  origin: 'http://localhost:8080',\n  // 允许跨域带 cookie\n  credentials: true\n}))\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("blockquote",[a("p",[s._v("发现项目需要用到图片,保存图片到public/images下面,去浏览器看看图片")])]),s._v(" "),a("blockquote",[a("p",[s._v("补充 ： 在js文件中 :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("写 /**  然后就可以写注释啦\n比如： \n/**\n * @description mysql 连接数据库\n * @author zsy\n */\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h1",{attrs:{id:"连接数据库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#连接数据库"}},[s._v("#")]),s._v(" 连接数据库")]),s._v(" "),a("blockquote",[a("p",[s._v("安装：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("cnpm i mingoose --save\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("在 db/db.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description mongoose 数据库连接\n * @author zsy\n */\nconst mongoose = require('mongoose')\n\nconst DB_NAME = 'demo'\nconst PORT = 27017\nconst IP = 'localhost'\n\nmongoose.connect(`mongodb://${IP}:${PORT}/${DB_NAME}`, {\n    useNewUrlParser: true,\n    useUnifiedTopology: true\n})\n\nmongoose.connection.on('open', err => {\n    if (err) {\n        console.log('数据库连接失败', err)\n    } else {\n        console.log('数据库连接成功')\n    }\n})\n\nmodule.exports = mongoose\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br")])]),a("blockquote",[a("p",[s._v("执行:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("node src/db/db.js\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h1",{attrs:{id:"需求和设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求和设计"}},[s._v("#")]),s._v(" 需求和设计")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("需求分析\n接口设计\n登录技术方案\n抽象数据模型\nSchema 和 model\n模拟数据操作\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br")])]),a("h1",{attrs:{id:"需求分析"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#需求分析"}},[s._v("#")]),s._v(" 需求分析")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("通过需求，原型图，看到服务端需要提供的能力\n如服务端需要提供哪些接口，存储哪些数据\n如服务端实现过程中，会遇到哪些问题，如何权衡\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h1",{attrs:{id:"restful-api"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#restful-api"}},[s._v("#")]),s._v(" Restful API")]),s._v(" "),a("blockquote",[a("p",[s._v("一种新的api设计方法")])]),s._v(" "),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[s._v("第一：\n传统api设计 ：把每个url当做一个功能\nRestful "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("API")]),a("span",{pre:!0,attrs:{class:"token literal-property property"}},[s._v("设计")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" 把每个url当作一个唯一的资源\n\n\n第二： 不使用url参数\n传统"),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("API")]),s._v("设计 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("pageIndex "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\nRestful "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("API")]),s._v("设计 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("list"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("\n\n第三： \n传统api： 用method表示操作类型\npost请求 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("create"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("blog\npost请求 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("update"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("blog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("id"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v("请求 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("get"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("-")]),s._v("blog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("?")]),s._v("id "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\nRestful "),a("span",{pre:!0,attrs:{class:"token constant"}},[s._v("API")]),s._v(" ： 用method表示操作类型\npost请求 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("blog\npatch请求 （更新） ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("blog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("get")]),s._v("请求 ："),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("api"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),s._v("blog"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("/")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),s._v("\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h1",{attrs:{id:"接口设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口设计"}},[s._v("#")]),s._v(" 接口设计")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("前后端一起设计\n一定要按照该设计，不得违约\n如发现问题，及时修改，交流。。\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h1",{attrs:{id:"md格式教学"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#md格式教学"}},[s._v("#")]),s._v(" md格式教学")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("# 一级标题\n## 二级标题\n- 列表1\n- 列表2\n- 列表3\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("div",{staticClass:"language-js line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-js"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("function")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("dn")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("blockquote",[a("p",[s._v("引用")])]),s._v(" "),a("blockquote",[a("p",[a("img",{attrs:{src:"%E5%9B%BE%E7%89%87%E5%9C%B0%E5%9D%80",alt:""}})])]),s._v(" "),a("blockquote",[a("p",[a("a",{attrs:{href:"http://dwdw",target:"_blank",rel:"noopener noreferrer"}},[s._v("慕课网，我是a标签"),a("OutboundLink")],1)])]),s._v(" "),a("blockquote",[a("p",[s._v("最后，百度找  markdown在线编辑器")])]),s._v(" "),a("h1",{attrs:{id:"接口设计-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口设计-2"}},[s._v("#")]),s._v(" 接口设计")]),s._v(" "),a("blockquote",[a("p",[s._v("在src/docs/API.md :")])]),s._v(" "),a("h1",{attrs:{id:"接口文档"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#接口文档"}},[s._v("#")]),s._v(" 接口文档")]),s._v(" "),a("h2",{attrs:{id:"登录"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录"}},[s._v("#")]),s._v(" 登录")]),s._v(" "),a("h3",{attrs:{id:"url"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/user/login")])]),s._v(" "),a("h3",{attrs:{id:"method"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("post")])]),s._v(" "),a("h3",{attrs:{id:"request-body"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    username:'demo',\n    password:'123'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"response-body"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"注册"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#注册"}},[s._v("#")]),s._v(" 注册")]),s._v(" "),a("h3",{attrs:{id:"url-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-2"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/user/register")])]),s._v(" "),a("h3",{attrs:{id:"method-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-2"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("post")])]),s._v(" "),a("h3",{attrs:{id:"request-body-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-2"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    username:'demo',\n    password:'123'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h3",{attrs:{id:"response-body-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-2"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"创建收货地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建收货地址"}},[s._v("#")]),s._v(" 创建收货地址")]),s._v(" "),a("h3",{attrs:{id:"url-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-3"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/user/address")])]),s._v(" "),a("h3",{attrs:{id:"method-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-3"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("post")])]),s._v(" "),a("h3",{attrs:{id:"request-body-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-3"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    city:'北京',\n    department:'xx小区',\n    houseNumber:'门牌号',\n    name:'张三',\n    phone:'1363234233',\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"response-body-3"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-3"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data:{\n        _id:'收获地址的 id',\n        city:'北京',\n        department:'xx小区',\n        houseNumber:'门牌号',\n        name:'张三',\n        phone:'1363234233',\n    }\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"获取地址列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取地址列表"}},[s._v("#")]),s._v(" 获取地址列表")]),s._v(" "),a("h3",{attrs:{id:"url-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-4"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/user/address")])]),s._v(" "),a("h3",{attrs:{id:"method-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-4"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("get")])]),s._v(" "),a("h3",{attrs:{id:"request-body-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-4"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    空\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"response-body-4"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-4"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data:[\n        {\n            _id:'收获地址的 id',\n            city:'北京',\n            department:'xx小区',\n            houseNumber:'门牌号',\n            name:'张三',\n            phone:'1363234233',\n        },\n        ...\n        ...\n    ]\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"获取单个地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取单个地址"}},[s._v("#")]),s._v(" 获取单个地址")]),s._v(" "),a("h3",{attrs:{id:"url-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-5"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/user/address/:id")])]),s._v(" "),a("blockquote",[a("p",[s._v("示例 ： api/user/address/100")])]),s._v(" "),a("h3",{attrs:{id:"method-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-5"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("get")])]),s._v(" "),a("h3",{attrs:{id:"request-body-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-5"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    空\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"response-body-5"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-5"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data: {\n            _id:'收获地址的 id',\n            city:'北京',\n            department:'xx小区',\n            houseNumber:'门牌号',\n            name:'张三',\n            phone:'1363234233',\n        }\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br")])]),a("h2",{attrs:{id:"更新收获地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#更新收获地址"}},[s._v("#")]),s._v(" 更新收获地址")]),s._v(" "),a("h3",{attrs:{id:"url-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-6"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/user/address/:id")])]),s._v(" "),a("blockquote",[a("p",[s._v("示例 ： api/user/address/100")])]),s._v(" "),a("h3",{attrs:{id:"method-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-6"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("patch")])]),s._v(" "),a("h3",{attrs:{id:"request-body-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-6"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    {\n        city:'北京',\n        department:'xx小区',\n        houseNumber:'门牌号',\n        name:'张三',\n        phone:'1363234233',\n    }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h3",{attrs:{id:"response-body-6"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-6"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br")])]),a("h2",{attrs:{id:"获取附近商店"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取附近商店"}},[s._v("#")]),s._v(" 获取附近商店")]),s._v(" "),a("h3",{attrs:{id:"url-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-7"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/shop/hot-list")])]),s._v(" "),a("h3",{attrs:{id:"method-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-7"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("get")])]),s._v(" "),a("h3",{attrs:{id:"request-body-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-7"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   空\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"response-body-7"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-7"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data :[\n        {\n            _id:'商店id',\n            name:'沃尔玛',\n            imgUrl:'沃尔玛 的 图片 url',\n            sales: 1000 , // 月售\n            expressLimit:0, // 快递起送价格\n            expressPrice: 5 ,  // 快递费\n            slogan : 'VIP 尊享满 89 减 4 元'\n        },\n        ...\n    ]\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("h2",{attrs:{id:"根据商店id查询商店介绍"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#根据商店id查询商店介绍"}},[s._v("#")]),s._v(" 根据商店id查询商店介绍")]),s._v(" "),a("h3",{attrs:{id:"url-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-8"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/shop/:id")])]),s._v(" "),a("blockquote",[a("p",[s._v("示例 ： api/shop/100")])]),s._v(" "),a("h3",{attrs:{id:"method-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-8"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("get")])]),s._v(" "),a("h3",{attrs:{id:"request-body-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-8"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   空\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"response-body-8"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-8"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data :{\n            _id:'商店id',\n            name:'沃尔玛',\n            imgUrl:'沃尔玛 的 图片 url',\n            sales: 1000 , // 月售\n            expressLimit:0, // 快递起送价格\n            expressPrice: 5 ,  // 快递费\n            slogan : 'VIP 尊享满 89 减 4 元'\n        },\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("h2",{attrs:{id:"根据商店id查询商店的商品列表"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#根据商店id查询商店的商品列表"}},[s._v("#")]),s._v(" 根据商店id查询商店的商品列表")]),s._v(" "),a("h3",{attrs:{id:"url-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-9"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/shop/:id/products")])]),s._v(" "),a("h3",{attrs:{id:"query"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#query"}},[s._v("#")]),s._v(" query")]),s._v(" "),a("blockquote",[a("p",[s._v("举例 ： api/shop/10/products?tab = 全部")])]),s._v(" "),a("blockquote",[a("p",[s._v("举例 ： api/shop/10/products?tab = 秒杀")])]),s._v(" "),a("h3",{attrs:{id:"method-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-9"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("get")])]),s._v(" "),a("h3",{attrs:{id:"request-body-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-9"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   空\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("h3",{attrs:{id:"response-body-9"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-9"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data :[\n        {\n            _id:'商品id',\n            name:'番茄 250g/份',\n            imgUrl:'xxx.png',\n            sales:10,  // 销量\n            price:33.3,\n            oldPrice:43,\n        }\n    ]\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br")])]),a("h2",{attrs:{id:"创建订单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建订单"}},[s._v("#")]),s._v(" 创建订单")]),s._v(" "),a("h3",{attrs:{id:"url-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-10"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/order")])]),s._v(" "),a("h3",{attrs:{id:"method-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-10"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("post")])]),s._v(" "),a("h3",{attrs:{id:"request-body-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-10"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   {\n    addressId:'收货地址 id',\n   // 备注 ：当前的项目，同一个订单只允许在一个商店购买\n    shopId:'商店的 id',\n    shopName:'沃尔玛',\n    isCanceled:false,  // 订单是否取消\n    products:[\n        {\n            id:'商品1 id',\n            mun:3            // 购买数量\n        },\n        {\n            id:'商品2 id',\n            mun:10            // 购买数量\n        }\n    ]\n   }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"response-body-10"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-10"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data :{\n            _id:'订单 id',\n        }\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("h1",{attrs:{id:"数据模型设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据模型设计"}},[s._v("#")]),s._v(" 数据模型设计")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("需要抽象出几个数据模型\n各个数据模型之间的关系\n每个数据模型之间的关系（根据原型图分析出来）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("分析项目后 ,发现需要设计出 ：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("    抽象5类数据\n用户 地址 商品 商店 订单\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("h1",{attrs:{id:"画出er图"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#画出er图"}},[s._v("#")]),s._v(" 画出ER图")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("表示各个数据模型的关系\n什么一对多 ，多对多 这样的关系  表示出来\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("注意 :订单的特殊性")])]),s._v(" "),a("blockquote",[a("p",[s._v("说明 ：如果下了一个订单，之后商品价格改变了，订单的价格不会变化，是多少就还是多少,所以，订单与商品，以及订单与地址 是复制关系~~")])]),s._v(" "),a("h1",{attrs:{id:"数据模型的设计"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据模型的设计"}},[s._v("#")]),s._v(" 数据模型的设计")]),s._v(" "),a("blockquote",[a("p",[s._v("docs/models.md :")])]),s._v(" "),a("h1",{attrs:{id:"数据模型设计-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#数据模型设计-2"}},[s._v("#")]),s._v(" 数据模型设计")]),s._v(" "),a("blockquote",[a("p",[s._v("其实就是列举出各个数据模型的示例，写明属性")])]),s._v(" "),a("h2",{attrs:{id:"用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户"}},[s._v("#")]),s._v(" 用户")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    _id:'xx'\n    username:'137xxxxx'\n    password:'123'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br")])]),a("h2",{attrs:{id:"地址"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#地址"}},[s._v("#")]),s._v(" 地址")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    username:'137xxxxx',    //就和用户产生关联\n    city:'北京',\n    department:'xx小区',\n    houseNumber:'门牌号',\n    name:'张三',\n    phone:'136xxxxxxx',\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br")])]),a("h2",{attrs:{id:"商店"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#商店"}},[s._v("#")]),s._v(" 商店")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    _id:'shangpinId'\n    name:'沃尔玛',\n    imgUrl:'xx.png',\n    sales:1000,\n    expressLimit:0,\n    expressPrice:5,\n    slogan:'红色的宣传语'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("h2",{attrs:{id:"商品"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#商品"}},[s._v("#")]),s._v(" 商品")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    _id:'xxx',\n    shopId:'shangpinId',  // 对应商品的 _id\n    name:'番茄',\n    imgUrl:'xxx.png',\n    sales:10,\n    price:'33.1',\n    oldPrice:'40.9',\n    tabs:['all','seckill']  //左侧tab类型\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("h2",{attrs:{id:"订单"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#订单"}},[s._v("#")]),s._v(" 订单")]),s._v(" "),a("blockquote",[a("p",[s._v("具有特殊性，所以待定")])]),s._v(" "),a("h1",{attrs:{id:"设计schema和model"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#设计schema和model"}},[s._v("#")]),s._v(" 设计Schema和Model")]),s._v(" "),a("blockquote",[a("p",[s._v("根据模型设计，编写Schemal和Model")])]),s._v(" "),a("blockquote",[a("p",[s._v("在 src/models/User.js  :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description User Model\n * @author zsy\n */\n\nconst mongoose = require('../db/db')\nlet Schemal = mongoose.Schema\n\nconst userRules = new Schemal({\n    username: {\n        type: String,\n        require: true,\n        unique: true\n    },\n    password: {\n        type:String,\n        require:true,\n        // 下面表示将该password字段过滤掉，这是mongoose的写法\n        select:false\n    }\n}, {\n    timestamps: true\n})\n\nconst UserModel = mongoose.model('user', userRules)\n\nmodule.exports = UserModel\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/models/Address.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description Address Model\n * @author zsy\n */\n\nconst mongoose = require('../db/db')\n\n// 请来一个保安\nlet Schemal = mongoose.Schema\n\n// 制定你家的规则\nconst addressRules = new Schemal({\n    username: {\n        type: String,\n        require: true,\n    },\n    city: String,\n    department: String,\n    houseNumber: String,\n    name: String,\n    phone: String,\n}, {\n    timestamps: true\n})\n\n// 告诉保安，你家的规则\nconst AddressModel = mongoose.model('address', addressRules)\n\nmodule.exports = AddressModel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/models/Shop.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description Shop Model\n * @author zsy\n */\n\nconst mongoose = require('../db/db')\n\n// 请来一个保安\nlet Schemal = mongoose.Schema\n\n// 制定你家的规则\nconst shopRules = new Schemal({\n    name: String,\n    imgUrl: String,\n    sales: Number,\n    expressLimit: {\n        type: Number,\n        default: 0\n    },\n    expressPrice: Number,\n    slogan: String\n}, {\n    timestamps: true\n})\n\n// 告诉保安，你家的规则\nconst shopModel = mongoose.model('shop', shopRules)\n\nmodule.exports = shopModel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/models/Product.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description Product Model\n * @author zsy\n */\n\nconst mongoose = require('../db/db')\n\n// 请来一个保安\nlet Schemal = mongoose.Schema\n\n// 制定你家的规则\nconst ProductRules = new Schemal({\n    shopId: {\n        type: String,\n        require: true\n    },\n    name: String,\n    imgUrl: String,\n    sales: Number,\n    price:Number,\n    oldPrice:Number,\n    tabs:[String]  // 示例 ：tabs:['all','seckill']\n}, {\n    timestamps: true\n})\n\n// 告诉保安，你家的规则\nconst ProductModel = mongoose.model('product', ProductRules)\n\nmodule.exports = ProductModel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("blockquote",[a("p",[s._v("其他同理")])]),s._v(" "),a("h1",{attrs:{id:"模拟数据操作"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#模拟数据操作"}},[s._v("#")]),s._v(" 模拟数据操作")]),s._v(" "),a("blockquote",[a("p",[s._v("在我们模拟数据操作的时候，可以理清楚数据的操作逻辑,\n同时给数据库增加一些数据")])]),s._v(" "),a("blockquote",[a("p",[s._v("在src/db/test/user_test.js:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 用户数据操作\n * @author zsy\n */\n\nconst UserModel = require('../models/User')\n\n    !(async () => {\n        // 模拟注册功能 ：创建一个新的用户\n        await UserModel.create({\n            username: 'zsy',\n            password: '123'\n        })\n\n        // 模拟登录\n        const zsy = await UserModel.findOne({\n            username: 'zsy',\n            password: '123'\n        })\n        console.log('zsy', zsy)\n    })()\n \n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br")])]),a("blockquote",[a("p",[s._v("执行该js文件")])]),s._v(" "),a("blockquote",[a("p",[s._v("在src/db/test/address_test.js:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 模拟收获地址\n * @author zsy\n */\n\nconst AddressModel = require('../../models/Address')\n\n    !(async () => {\n        // await AddressModel.create({\n        //     // 创建收获地址\n        //     username: 'demo',\n        //     city: '深圳市',\n        //     department: 'yyy小区',\n        //     houseNumber: '门牌号2',\n        //     name: '李四',\n        //     phone: '186666666'\n        // })\n\n        // 获取用户的收获地址列表（获取demo的）\n        // sort({updateAt: -1}) 表示按照 updateAt字段 逆序 进行输入\n        // 逆序 从大到小输出\n        // const addressList = await AddressModel.find({\n        //     username: 'demo'\n        // }).sort({\n        //     updateAt: -1\n        // }).select('+password')   // 该行代码表示将password字段加上显示出来\n        // console.log(addressList)\n\n        // 根据 id 获取单个收获地址\n        // const id = '6208c34e7586b3665315570f'\n        // const address = await AddressModel.findById(id)\n        // console.log(address)\n\n        // 更新收获地址\n        const id = '6208c34e7586b3665315570f'\n        const newData = {\n            username: 'demo',\n            city: '新的地址11',\n            department: '新的小区111',\n            houseNumber: '新的门牌号111',\n            name: '新的昵称11',\n            phone: '136434334'\n        }\n        const address = await AddressModel.findOneAndUpdate({\n            _id: id,\n            username: 'demo'\n        }, newData, {\n            new: true\n        })\n        console.log(address)\n    })()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br")])]),a("blockquote",[a("p",[s._v("写完都是直接执行该js文件")])]),s._v(" "),a("blockquote",[a("p",[s._v("在src/db/test/shop_test.js:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 模拟商店操作\n * @author zsy\n */\n\nconst shopModel = require('../../models/Shop')\n\n    !(async () => {\n        // 创建商店\n        // await shopModel.create({\n        //     name: '宜家',\n        //     // 图片路径直接根据相对于 pubilc文件夹\n        //     imgUrl: '/images/test.jpg',\n        //     sales: 999,\n        //     expressLimit: 30,\n        //     expressPrice: 5,\n        //     slogan: 'VIP尊享',\n        // })\n\n        // 查询商店列表\n        // const shopLists = await shopModel.find().sort({\n        //     _id: -1\n        // })\n        // console.log(shopLists)   \n\n        // 根据id获取对应的商店信息\n        const id = '6208d617dad8f472adca6226'\n        const shop = await shopModel.findById(id)\n        console.log(shop)\n    })()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/db/test/product_test.js:")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 模拟操作商品\n * @author zsy\n */\n\nconst ProductModel = require('../../models/Product')\n\n    !(async () => {\n        // 为 宜家 商店 添加商品\n        const shopId = '6208d617dad8f472adca6226'\n        // ProductModel.create({\n        //     shopId,\n        //     name: '香蕉',\n        //     imgUrl: '/images/test.jpg',\n        //     sales: 13,\n        //     price: 12,\n        //     oldPrice: 50,\n        //     tabs: ['all', 'seckill']\n        // })\n\n        // 查询某个商店，某个tab 的商品列表\n        const list = await ProductModel.find({\n            // 根据指定的商店id，以及商品的 tabs 包含了fruit\n            shopId,\n            tabs: {\n                $in: 'fruit'\n            }\n        })\n        console.log(list)\n    })()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("h1",{attrs:{id:"订单的特殊性-重点"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#订单的特殊性-重点"}},[s._v("#")]),s._v(" 订单的特殊性 重点")]),s._v(" "),a("blockquote",[a("p",[s._v("docs/models:  新增 :")])]),s._v(" "),a("h2",{attrs:{id:"订单-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#订单-2"}},[s._v("#")]),s._v(" 订单")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    _id:'xxx',\n\n    username:'demo',\n\n    shopId:'shangdianId',\n    shopName:'沃尔玛',\n    isCanceled:'false', // 订单是否取消\n\n    address:{\n        username:'demo',   \n        city:'北京',\n        department:'xx小区',\n        houseNumber:'门牌号',\n        name:'张三',\n        phone:'136xxxxxxx',\n    },\n\n    products:[\n        {\n            pro:{\n                _id:'xxx',\n                shopId:'shangdianId',  // 对应商店的 _id\n                name:'番茄',\n                imgUrl:'xxx.png',\n                sales:10,\n                price:'33.1',\n                oldPrice:'40.9',\n            },\n            orderSales:3\n        },\n        ...\n    ]\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br")])]),a("blockquote",[a("p",[s._v("在 docs/API.md 新增 :")])]),s._v(" "),a("h2",{attrs:{id:"创建订单-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建订单-2"}},[s._v("#")]),s._v(" 创建订单")]),s._v(" "),a("h3",{attrs:{id:"url-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#url-11"}},[s._v("#")]),s._v(" url")]),s._v(" "),a("blockquote",[a("p",[s._v("api/order")])]),s._v(" "),a("h3",{attrs:{id:"method-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#method-11"}},[s._v("#")]),s._v(" method")]),s._v(" "),a("blockquote",[a("p",[s._v("post")])]),s._v(" "),a("h3",{attrs:{id:"request-body-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#request-body-11"}},[s._v("#")]),s._v(" request body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("   {\n    addressId:'收货地址 id',\n   // 备注 ：当前的项目，同一个订单只允许在一个商店购买\n    shopId:'商店的 id',\n    shopName:'沃尔玛',\n    isCanceled:false,  // 订单是否取消\n    products:[\n        {\n            id:'商品1 id',\n            mun:3            // 购买数量\n        },\n        {\n            id:'商品2 id',\n            mun:10            // 购买数量\n        }\n    ]\n   }\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br")])]),a("h3",{attrs:{id:"response-body-11"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#response-body-11"}},[s._v("#")]),s._v(" response body")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("{\n    errno:0,\n    data :{\n            _id:'订单 id',\n        }\n    message:'errno !==0 时，其错误信息'\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/models/Order.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description Order Model\n * @author zsy\n */\n\nconst mongoose = require('../db/db')\n\n// 请来一个保安\nlet Schemal = mongoose.Schema\n\n// 制定你家的规则\nconst orderRules = new Schemal({\n    username: {\n        type: String,\n        require: true,\n    },\n    shopId: String,\n    shopName: String,\n\n    isCanceled: {\n        type: Boolean,\n        default: false\n    },\n\n    address: {\n        username: String,\n        city: String,\n        department: String,\n        houseNumber: String,\n        name: String,\n        phone: String,\n    },\n    products: [{\n        pro: {\n            shopId: {\n                type: String,\n                require: true\n            },\n            name: String,\n            imgUrl: String,\n            sales: Number,\n            price: Number,\n            oldPrice: Number,\n            tabs: [String]\n        },\n        orderSales: Number\n    }]\n}, {\n    timestamps: true\n})\n\n// 告诉保安，你家的规则\nconst OrderModel = mongoose.model('order', orderRules)\n\nmodule.exports = OrderModel\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/db/test/order-test.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 模拟订单操作\n * @author zsy\n */\n\nconst OrderModel = require('../../models/Order')\nconst shopModel = require('../../models/Shop')\nconst UserModel = require('../../models/User')\nconst AddressModel = require('../../models/Address')\nconst ProductModel = require('../../models/Product')\n\n\n    !(async () => {\n        // 前端提交过来的数据\n        const requestBody = {\n            addressId: '6208c34e7586b3665315570f',\n            shopId: '6208d617dad8f472adca6226',\n            shopName: '沃尔玛',\n            isCanceled: false,\n            products: [{\n                id: '6208d8c59097a6355e580eb0',\n                num: 3\n            }, {\n                id: '6208d927c4ae44479db29009',\n                num: 332\n            }]\n        }\n\n        // 地址信息\n        const addressInfo = await AddressModel.findById(requestBody.addressId)\n        // console.log(addressInfo)\n        // 已购买的商品id 数组\n        const proIdArr = requestBody.products.map(item => {\n            return item.id\n        })\n        // console.log(proIdArr)\n\n        // 商品的信息\n        const proList = await ProductModel.find({\n            shopId: requestBody.shopId,\n            // 表示 _id 包含在 proIdArr 数组中\n            _id: {\n                $in: proIdArr\n            }\n        })\n        // console.log(proList)\n\n        // 最终封装完的商品数组\n        const productsList = proList.map(item1 => {\n            // 必须要转为 字符串\n            const id = item1.id.toString()\n            // 找到购买商品的数量\n            const result = requestBody.products.filter(item2 => item2.id === id)\n            return {\n                products: item1,\n                orderSales: result[0].num\n            }\n        })\n        // console.log(productsList)\n\n        // 模拟创建订单 \n        await OrderModel.create({\n            username: 'demo',\n            shopId: requestBody.shopId,\n            shopName: requestBody.shopName,\n            isCanceled: requestBody.isCanceled,\n            address: addressInfo,\n            products: productsList\n        })\n    })()\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br"),a("span",{staticClass:"line-number"},[s._v("34")]),a("br"),a("span",{staticClass:"line-number"},[s._v("35")]),a("br"),a("span",{staticClass:"line-number"},[s._v("36")]),a("br"),a("span",{staticClass:"line-number"},[s._v("37")]),a("br"),a("span",{staticClass:"line-number"},[s._v("38")]),a("br"),a("span",{staticClass:"line-number"},[s._v("39")]),a("br"),a("span",{staticClass:"line-number"},[s._v("40")]),a("br"),a("span",{staticClass:"line-number"},[s._v("41")]),a("br"),a("span",{staticClass:"line-number"},[s._v("42")]),a("br"),a("span",{staticClass:"line-number"},[s._v("43")]),a("br"),a("span",{staticClass:"line-number"},[s._v("44")]),a("br"),a("span",{staticClass:"line-number"},[s._v("45")]),a("br"),a("span",{staticClass:"line-number"},[s._v("46")]),a("br"),a("span",{staticClass:"line-number"},[s._v("47")]),a("br"),a("span",{staticClass:"line-number"},[s._v("48")]),a("br"),a("span",{staticClass:"line-number"},[s._v("49")]),a("br"),a("span",{staticClass:"line-number"},[s._v("50")]),a("br"),a("span",{staticClass:"line-number"},[s._v("51")]),a("br"),a("span",{staticClass:"line-number"},[s._v("52")]),a("br"),a("span",{staticClass:"line-number"},[s._v("53")]),a("br"),a("span",{staticClass:"line-number"},[s._v("54")]),a("br"),a("span",{staticClass:"line-number"},[s._v("55")]),a("br"),a("span",{staticClass:"line-number"},[s._v("56")]),a("br"),a("span",{staticClass:"line-number"},[s._v("57")]),a("br"),a("span",{staticClass:"line-number"},[s._v("58")]),a("br"),a("span",{staticClass:"line-number"},[s._v("59")]),a("br"),a("span",{staticClass:"line-number"},[s._v("60")]),a("br"),a("span",{staticClass:"line-number"},[s._v("61")]),a("br"),a("span",{staticClass:"line-number"},[s._v("62")]),a("br"),a("span",{staticClass:"line-number"},[s._v("63")]),a("br"),a("span",{staticClass:"line-number"},[s._v("64")]),a("br"),a("span",{staticClass:"line-number"},[s._v("65")]),a("br"),a("span",{staticClass:"line-number"},[s._v("66")]),a("br"),a("span",{staticClass:"line-number"},[s._v("67")]),a("br"),a("span",{staticClass:"line-number"},[s._v("68")]),a("br"),a("span",{staticClass:"line-number"},[s._v("69")]),a("br"),a("span",{staticClass:"line-number"},[s._v("70")]),a("br")])]),a("h1",{attrs:{id:"开发与自测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#开发与自测"}},[s._v("#")]),s._v(" 开发与自测")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("开发接口（路由）\n开发controller\n使用postman自测 （前后端分离）\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br")])]),a("blockquote",[a("p",[s._v("首先 : 在routes/users.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("router.prefix('/api/user')\nrouter.post('/register', async function (ctx, next) {\n  // 获取前端注册携带的参数\n  const {\n    username,\n    password\n  } = ctx.request.body\n  // 新建用户\n})\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br")])]),a("blockquote",[a("p",[s._v("备注 ：可以在函数的前面 输入  /** 就会自动生成注释")])]),s._v(" "),a("blockquote",[a("p",[s._v("在controller/user.js  :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description user controller\n * @author zsy\n */\n\n// 引入模型\nconst User = require('../models/User')\n\n/**\n * \n * @param {string} username 用户名\n * @param {string} passwrod 密码\n * @returns \n */\nasync function register(username, passwrod) {\n    // 保存到数据库中\n    const newUser = await User.create({\n        username,\n        password\n    })\n    return newUser\n}\n\nmodule.export = {\n    register\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br")])]),a("blockquote",[a("p",[s._v("在 routes/users.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const {\n  register\n} = require('../controller/user')\n\nrouter.post('/register', async function (ctx, next) {\n    // 补充：对前端提交过来的数据进行类型校验\n    // ctx.verifyParams({\n    //  对前端传递过来的用户名和密码进行类型校验\n    //    name:{type:'string',require:true},\n    //    password:{type:'string',require:true}\n    // })\n\n  // 获取前端注册携带的参数\n  const {\n    username,\n    password\n  } = ctx.request.body\n  // 新建用户  因为创建新用户 比较消耗空间等,所以使用 try catch\n  try {\n    const newUser = await register(username, password)\n    ctx.body = {\n      errno: 0,\n      data: newUser // 后端可以在接口规范上，多返回一些数据，防止前端有变动\n    }\n  } catch (ex) {\n    console.error(ex) // 新东西，首次见到\n    ctx.body = {\n      errno: 10001, // 设置多个不同的状态码，主要是为了区分\n      message: `注册失败-${ex.message}`\n    }\n  }\n})\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br"),a("span",{staticClass:"line-number"},[s._v("31")]),a("br"),a("span",{staticClass:"line-number"},[s._v("32")]),a("br"),a("span",{staticClass:"line-number"},[s._v("33")]),a("br")])]),a("blockquote",[a("p",[s._v("去postman测试")])]),s._v(" "),a("h1",{attrs:{id:"统一返回格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#统一返回格式"}},[s._v("#")]),s._v(" 统一返回格式")]),s._v(" "),a("blockquote",[a("p",[s._v("因为我们返回json数据的时候，总是要写 errno，data")])]),s._v(" "),a("blockquote",[a("p",[s._v("在src/res-model/SuccessModel.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("\n/**\n * @description 成功返回的数据模型\n * @author zsy\n */\nclass SuccessModel {\n    constructor(data) {\n        this.errno = 0 //成功返回的标志\n        if (data != null) {\n            this.data = data\n        }\n    }\n}\nmodule.exports = SuccessModel\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("blockquote",[a("p",[s._v("在src/res-model/ErrorModel.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v('/**\n * @description 错误返回的数据模型\n * @author zsy\n */\n\nclass ErrorModel {\n    constructor(errno = -1, message = "error") {\n        this.errno = errno\n        this.message = this.message\n    }\n}\nmodule.exports = ErrorModel\n\n')])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("blockquote",[a("p",[s._v("src/res-model/index.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 返回数据模型 入口文件\n * @author zsy\n */\n\nconst SuucessModel = require('./SuucessModel')\nconst ErrorModel = require('./ErrorModel')\n\nmodule.exports = {\n    SuucessModel,\n    ErrorModel\n}\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br")])]),a("blockquote",[a("p",[s._v("使用那个class,在routes/users.js ：")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const {SuucessModel,ErrorModel} = require('../res-model/index)\nctx.body = new SuccessModel(newUser)\n\n// 补充:409表示冲突了，一般是注册用户时候，用户名如果发生了冲突，就可以使用\nctx.throw(409,'用户名已经被占用')\n\n\nctx.body = new ErrorModel(10001, `注册失败 - ${ex.message}`)\n\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br")])]),a("blockquote",[a("p",[s._v("再次使用postman测试一下")])]),s._v(" "),a("h1",{attrs:{id:"登录接口-开发与自测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#登录接口-开发与自测"}},[s._v("#")]),s._v(" 登录接口 - 开发与自测")]),s._v(" "),a("blockquote",[a("p",[s._v("在routes/user.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("// 用户登录\nrouter.post('/login', async function (ctx, next) {\n  // 获取前端请求数据\n  const {\n    username,\n    password\n  } = ctx.request.body\n\n  // 进行登录验证\n  const findUserResult = await login(username, password)\n  if (findUserResult) {\n    // 登录成功，设置session\n    ctx.session.userInfo = {\n      username\n    }\n    ctx.body = new SuccessModel()\n  } else {\n    // 登录失败\n    ctx.body = new ErrorModel(10002, '登录验证失败')\n  }\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br")])]),a("blockquote",[a("p",[s._v("与此同时在 controller下面的user.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * \n * @param {string} username 用户名\n * @param {string} password 密码\n */\nasync function login(username, password) {\n    // 补充如下：根据前端传递的用户id删除用户\n    // const user = await UserModel.findByIdAndRemove(ctx.params.id)\n    // if(!user) {ctx.throw(404,'用户不存在')}\n\n    const findUserResult = await UserModel.findOne({\n        username,\n        password\n    })\n    if (findUserResult != null) {\n        return true\n    }\n    return false\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br")])]),a("blockquote",[a("p",[s._v("补充：应该要添加一个登录验证中间件 ，在middlewares/loginCheck.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description 登录验证的中间件\n * @author zsy\n */\n\nconst {\n    ErrorModel\n} = require('../res-model/index')\n\nasync function loginCheck(ctx, next) {\n    const userInfo = ctx.session.userInfo\n    if (userInfo && userInfo.username) {\n        // 登录验证成功\n        await next()\n        return\n    }\n    // 登录失败\n    ctx.body = new ErrorModel(10003, '登录验证失败')\n}\nmodule.exports = loginCheck\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br")])]),a("h1",{attrs:{id:"创建收获地址的开发与自测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建收获地址的开发与自测"}},[s._v("#")]),s._v(" 创建收获地址的开发与自测")]),s._v(" "),a("blockquote",[a("p",[s._v("在routes/address.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("/**\n * @description address router\n * @author zsy\n */\n\nconst router = require('koa-router')()\n\n// api前缀\nrouter.prefix('/api/user/address')\n\n// 成功和失败返回数据模型\nconst {\n    SuccessModel,\n    ErrorModel\n} = require('../res-model/index')\n\nconst loginCheck = require('../middlewares/loginCheck')\n\n// 创建收获地址\nrouter.post('/', )\n\n// 获取收获地址列表\n\n\n// 获取单个收获地址\n\n\n// 更新收货地址\n\nmodule.exports = router\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br"),a("span",{staticClass:"line-number"},[s._v("24")]),a("br"),a("span",{staticClass:"line-number"},[s._v("25")]),a("br"),a("span",{staticClass:"line-number"},[s._v("26")]),a("br"),a("span",{staticClass:"line-number"},[s._v("27")]),a("br"),a("span",{staticClass:"line-number"},[s._v("28")]),a("br"),a("span",{staticClass:"line-number"},[s._v("29")]),a("br"),a("span",{staticClass:"line-number"},[s._v("30")]),a("br")])]),a("blockquote",[a("p",[s._v("在app.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const addressRouter = require('./routes/address')\napp.use(addressRouter.routes(), addressRouter.allowedMethods())\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("blockquote",[a("p",[s._v("补充routes/address.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const {createAddress} = require('../controller/address')\n// 创建收获地址路由\nrouter.post('/', loginCheck,async function (ctx, next) {\n    // 前端并没有不需要传入 username，但是我们又要把username写入数据库的addresses表（为了与用户相关联）\n    // 所以从session获取\n    const userInfo = ctx.session.userInfo\n    const addressBody = ctx.body.request\n    // 创建收货地址\n    const newAddress = await createAddress(userInfo, addressBody)\n    try {\n        ctx.body = new SuccessModel(newAddress)\n    } catch (ex) {\n        console.log(ex)\n        ctx.body = new ErrorModel('10004', `创建收货地址失败---${ex.message}`)\n    }\n})\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br")])]),a("blockquote",[a("p",[s._v("controller/address.js :")])]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("const AddressModel = require('../models/Address')\n\n/**\n *\n * @param {string} param0 用户名\n * @param {*} addressBody 地址信息\n * @returns \n */\nasync function createAddress({\n    username\n}, addressBody) {\n\n    const newAddress = await AddressModel.create({\n        username,\n        ...addressBody,\n    })\n\n    return newAddress\n}\n\nmodule.exports = {\n    createAddress\n}\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br"),a("span",{staticClass:"line-number"},[s._v("16")]),a("br"),a("span",{staticClass:"line-number"},[s._v("17")]),a("br"),a("span",{staticClass:"line-number"},[s._v("18")]),a("br"),a("span",{staticClass:"line-number"},[s._v("19")]),a("br"),a("span",{staticClass:"line-number"},[s._v("20")]),a("br"),a("span",{staticClass:"line-number"},[s._v("21")]),a("br"),a("span",{staticClass:"line-number"},[s._v("22")]),a("br"),a("span",{staticClass:"line-number"},[s._v("23")]),a("br")])]),a("h1",{attrs:{id:"收货地址相关的开发与自测"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#收货地址相关的开发与自测"}},[s._v("#")]),s._v(" 收货地址相关的开发与自测")]),s._v(" "),a("h2",{attrs:{id:"补充-获取params的id-ctx-params-id"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#补充-获取params的id-ctx-params-id"}},[s._v("#")]),s._v(" 补充 ：获取params的id  : ctx.params.id")]),s._v(" "),a("h2",{attrs:{id:"获取query的tab-ctx-query-tab"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#获取query的tab-ctx-query-tab"}},[s._v("#")]),s._v(" 获取query的tab  : ctx.query.tab")]),s._v(" "),a("blockquote",[a("p",[s._v("补充：patch是 RestfulAPI规范 更新数据的时候推荐使用")])]),s._v(" "),a("blockquote",[a("p",[s._v("post请求 获取 前端请求的数据 ctx.request.body")])]),s._v(" "),a("h1",{attrs:{id:"前后端联调"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#前后端联调"}},[s._v("#")]),s._v(" 前后端联调")]),s._v(" "),a("h2",{attrs:{id:"在前端中的axios实例-与请求超时平级"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#在前端中的axios实例-与请求超时平级"}},[s._v("#")]),s._v(" 在前端中的axios实例：与请求超时平级")]),s._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[s._v("withCredentials:true  // 表示允许跨域传递cookie\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])])])}),[],!1,null,null,null);n.default=t.exports}}]);